@model chat.ViewModels.ChatEditViewModel
@{
    var photoPath = "~/images/" + (Model.PhotoPath ?? "no_chat_avatar.jpg");
}

<div class="text-light">
    <h1>Hi</h1>
    @if (Model.AddUsersToChat)
    {
    <form asp-controller="Chat" asp-action="AddMemder" asp-route-ChatId="@Model.ChatId">
        <div asp-validation-summary="All" class="text-danger"></div>

        <label asp-for="NewUserName"></label>
        <div><input asp-for="NewUserName" placeholder="WriteUserName"></div>

        <div><button type="submit" asp-action="AddMemder" asp-route-chatId="@Model.ChatId">Add</button></div>
    </form>
    }

    <form method="post" asp-route-chatId="@Model.ChatId" asp-action="Leave">
        <div><button>LeveChat</button></div>
    </form>

    @for (int i = 0; i < Model.UserNameList.Count; ++i)
    {
        <div>
            <label>@Model.UserNameList[i]</label>
            @if (Model.KickUsers)
            {
                <form method="post" asp-action="KickUser"
                      asp-route-userId="@Model.UserIdList[i]"
                      asp-route-chatId="@Model.ChatId">
                    <button>Kick</button>
                </form>
            }
            @if (Model.GiveRoles)
            {
                <a asp-action="ChangeRole" asp-route-userId="@Model.UserIdList[i]"
                   asp-route-chatId="@Model.ChatId">ChangeRole</a>
            }
        </div>
    }

    @if (Model.EditChat)
    {
        <form enctype="multipart/form-data" method="post" asp-action="EditChat" asp-route-chatId="@Model.ChatId">
            <img class="card-img-top" src="@photoPath" asp-append-version="true" /> @*вивід картинки*@

            <label asp-for="Photo"></label>
            <div class="col-sm-10">
                <div class="custom-file">
                    <input asp-for="Photo" class="form-control custom-file-input">
                    <label class="custom-file-label">Choose File...</label>
                </div>
            </div>
            <div>
                <label asp-for="ChatName"></label>
                <input value="@Model.ChatName" asp-for="ChatName" />
                <span asp-validation-for="ChatName" class="text-danger"></span>
            </div>
            @section Scripts {
                <script>
                    $(document).ready(function () {
                        $('.custom-file-input').on("change", function () {
                            var fileName = $(this).val().split("\\").pop();
                            $(this).next('.custom-file-label').html(fileName);
                        });
                    });
                </script>
            }
            <button>Save changes</button>
        </form>

        <form method="post" asp-action="DeleteChat" asp-route-chatId="@Model.ChatId">
            <button>delete chat </button>
        </form>
    }

</div>
